"use strict";(function(){let previewButton=document.getElementById("dce-preview-pdf");let errorDiv=document.getElementById("dce-preview-error");let ajaxUrl=previewButton.dataset.url;let ajaxAction=previewButton.dataset.action;previewButton.addEventListener("click",async()=>{errorDiv.style.display="none";let codeMirror=document.getElementsByClassName("CodeMirror")[0];let form=document.getElementById("post");codeMirror.CodeMirror.refresh();codeMirror.CodeMirror.save();let data=new FormData(form);data.set("action",ajaxAction);let response;try{response=await fetch(ajaxUrl,{method:"POST",body:new URLSearchParams(data),})}catch(e){errorDiv.style.display="block";errorDiv.textContent=e.message;return}
if(response.headers.get("Content-Type")!=="application/pdf"){const json=await response.json();errorDiv.style.display="block";errorDiv.textContent=json.data.message;return}
let blob=await response.blob();let link=document.createElement("a");link.href=window.URL.createObjectURL(blob);link.download="PDF Preview";link.click()});const getSelect2Options=(postType)=>{return{ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(params){let args={q:params.term,action:"dce_get_posts",};if(postType){args.dce_post_type=postType}
return args},processResults:function(data){var options=[];if(data){jQuery.each(data,function(index,text){options.push({id:text[0],text:text[1]})})}
return{results:options,}},cache:!0,},minimumInputLength:3,}};jQuery(function($){$("#dce-preview-post").select2(getSelect2Options(!1));$("#dce-html-template-id").select2(getSelect2Options("elementor_library"),)});window.addEventListener("load",(_)=>{let isTemplate=document.getElementById("dce-html-is-template");let templateId=document.getElementById("dce-html-template-section");let code=document.getElementById("dce-html-code-section");if(isTemplate.checked){code.style.display="none";templateId.style.display="block"}else{code.style.display="block";templateId.style.display="none"}
isTemplate.addEventListener("change",function(){if(this.checked){code.style.display="none";templateId.style.display="block"}else{code.style.display="block";templateId.style.display="none"}})})})()